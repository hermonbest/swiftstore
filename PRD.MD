PRD: SwiftStore (Multi-Tenant E-commerce Platform)1. Project OverviewSwiftStore is a "SaaS for E-commerce" (similar to Shopify or Bumpa). It allows any merchant to sign up and instantly launch a hosted web store with a custom subdomain, inventory management, and automated payment processing.2. Target AudienceMerchants: Small to medium business owners selling physical or digital goods.Customers: People who visit the merchants' storefronts to buy products.3. Core Functional RequirementsA. The Merchant Dashboard (The "Control Center")Onboarding: A multi-step form to set up store name, currency, and subdomain.Product Management: Full CRUD (Create, Read, Update, Delete) for products. Support for:Images (Cloudinary/UploadThing).Variants (Sizes, Colors).Physical vs. Digital types.Inventory Tracking: Automatic stock deduction on successful payment.Analytics: Visual charts showing daily/weekly revenue and order volume.Discount Engine: Create coupon codes (e.g., SAVE20) with expiry dates.Order Management: View orders, change status (Pending → Shipped → Delivered), and generate PDF receipts.B. The Storefront (The "Customer-Facing Site")Dynamic Subdomains: merchantname.swiftstore.com serves that specific merchant's products.Shopping Cart: Persistent cart (using LocalStorage or Cookies).Checkout Flow: Integration with Startbutton Africa for multi-currency payments.Real-time Chat: A floating chat bubble for customers to talk to the merchant.C. Admin & InfrastructureAuthentication: Social login (Google) + Role-Based Access Control (RBAC).Multi-tenancy Logic: Middleware to route traffic based on the URL.4. User Flows (The Logic Path)Flow 1: Merchant OnboardingSign Up: Merchant signs up via Clerk (Google Auth).Create Store: User enters Store Name (Aisha's Boutique) and Subdomain (aisha).Validation: System checks if aisha.swiftstore.com is available.Dashboard: Redirected to the dashboard to add their first product.Flow 2: Customer PurchaseDiscovery: Customer visits aisha.swiftstore.com.Selection: Browses products, selects a "Large Red Dress," and adds to cart.Checkout: Customer enters email and shipping address.Payment: Clicks "Pay," redirected to Startbutton Africa.Confirmation: On success, the customer sees a "Thank You" page and receives a PDF Receipt.Notification: The Merchant gets a real-time notification of a new sale.5. Technical Stack (Production Ready)LayerTechnologyFrameworkNext.js 14+ (App Router)AuthClerk (Handles sessions, social login, and RBAC)DatabasePostgreSQL (Hosted on Neon or Supabase)ORMPrisma (For type-safe database queries)StylingTailwind CSS + Shadcn UI (For a pro look)PaymentsStartbutton AfricaReal-timePusher (For the chat system)File StorageUploadThing (Product images/Digital downloads)6. Database Schema Design (The Foundation)To make this multi-tenant, every table (except User) must have a storeId.User: id, email, role (ADMIN/USER)Store: id, name, subdomain, customDomain, logo, userIdProduct: id, storeId, name, description, price, stock, images[], type(PHYSICAL/DIGITAL)Order: id, storeId, customerEmail, totalAmount, status(PAID/PENDING), items[]ChatMessage: id, storeId, senderId, receiverId, content, timestamp7. Next.js Architecture StrategyThe Middleware ApproachYou will use a file named middleware.ts in your Next.js root. This file intercepts every request.If the URL is app.swiftstore.com → Show the Dashboard.If the URL is nike.swiftstore.com → Rewrite the URL internally to show the Storefront for "Nike."8. Development Phases (The Build Plan)Phase 1 (Foundation): Setup Next.js, Clerk Auth, and Database connection.Phase 2 (Dashboard): Build the "Create Store" flow and Product CRUD.Phase 3 (Multi-tenancy): Implement the Middleware to handle subdomains.Phase 4 (Storefront): Build the public-facing product catalog and shopping cart.Phase 5 (Payments & PDF): Integrate Startbutton and generate PDF invoices using react-pdf.Phase 6 (Real-time): Add the Chat bubble using SOCKET.IO.